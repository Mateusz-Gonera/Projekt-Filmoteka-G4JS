const e=async e=>{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=18cc3ec683925dedb66d3e6092890eaa&language=pl-PL`);if(!t.ok)throw new Error;return await t.json()},t=document.querySelector(".pagination__list"),l=document.querySelector(".film-list"),n=document.querySelector(".prev"),a=document.querySelector(".next"),i=document.querySelector("#watchedButton"),o=document.querySelector("#queueButton");let s=1;const c=document.querySelector(".modal__img-picture"),r=document.querySelector(".modal__head"),d=document.querySelector(".modal__rating"),p=document.querySelector(".modal__votes-number"),u=document.querySelector(".modal__popularity-total"),m=document.querySelector(".modal__title-original"),g=document.querySelector(".modal__genre-description"),y=document.querySelector(".modal__text"),_=document.querySelector(".modal__button-watched"),v=document.querySelector(".modal__button-queue");function h(e,l){let n,a="",i=l-2,o=l+2;if(t.innerHTML="",e<7)for(let t=1;t<=e;t++)n=l===t?"btn__active":"",a+=`<li class="num ${n} pagination__item"><span>${t}</span></li>`;else{l>2&&(a+='<li class="num-first pagination__item"><span>1</span></li>',l>4&&(a+='<li class="dots"><span>...</span></li>')),e>6&&(l===e&&(i-=2),l===e-1&&(i-=1),l===e-2&&(i-=1,o-=1),1===l&&(o+=2,i+=1),2===l&&(o+=1),3===l&&(o+=1,i+=1));for(let t=i;t<=o;t++)t>e||(0===t&&t++,n=l===t?"btn__active":"",a+=`<li class="num ${n} pagination__item"><span>${t}</span></li>`);l<e-1&&(l<e-3&&(a+='<li class="dots"><span>...</span></li>'),a+=`<li class="num-last pagination__item"><span>${e}</span></li>`)}t.innerHTML=a}l.innerHTML="",t.innerHTML="",a.style.display="none",n.style.display="none";const L=t=>{const n=t.map((e=>`<div class="single-film" data-id="${e.id}" data-modal-open>\n            <img class="film-image" src="https://image.tmdb.org/t/p/w400/${e.poster_path}"\n                alt="${e.title}">\n            <div class="film-info">\n                <p class="film-title">${e.title}</p>\n                <div class="film-subinfo">\n                    <p class="film-genre">${e.genres.map((e=>e.name)).join(", ")}</p>\n                    <p>${e.release_date}</p>\n                </div>\n            </div>\n        </div>`)).join("");l.innerHTML=n;document.querySelectorAll(".single-film").forEach((t=>{t.addEventListener("click",(async t=>{t.preventDefault();const l=t.target.dataset.id;console.log(l);const n=await e(l);(async e=>{c.src=`https://image.tmdb.org/t/p/w400/${e.poster_path}`,r.innerHTML=`${e.title}`,d.innerHTML=`${e.vote_average.toFixed(1)}`,p.innerHTML=`${e.vote_count}`,u.innerHTML=`${e.popularity.toFixed(1)}`,m.innerHTML=`${e.original_title}`,g.innerHTML=`${e.genres.map((e=>e.name)).join(", ")}`,y.innerHTML=`${e.overview}`})(n),_.addEventListener("click",(()=>{watchedFilmsStorage.push({id:n.id,poster_path:n.poster_path,title:n.title,release_date:n.release_date,vote_average:n.vote_average,vote_count:n.vote_count,popularity:n.popularity,original_title:n.original_title,genres:n.genres,overview:n.overview});const e=[...new Map(watchedFilmsStorage.map((e=>[e.id,e]))).values()];localStorage.setItem("Watched films",JSON.stringify(e))})),v.addEventListener("click",(()=>{queuedFilmsStorage.push({id:n.id,poster_path:n.poster_path,title:n.title,release_date:n.release_date,vote_average:n.vote_average,vote_count:n.vote_count,popularity:n.popularity,original_title:n.original_title,genres:n.genres,overview:n.overview});const e=[...new Map(queuedFilmsStorage.map((e=>[e.id,e]))).values()];localStorage.setItem("Queued films",JSON.stringify(e))}))}))})),(()=>{const e={openModalBtn:document.querySelectorAll("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.forEach((e=>e.addEventListener("click",t))),e.modal.classList.contains("is-hidden")||(e.closeModalBtn.addEventListener("click",(()=>{e.modal.classList.add("is-hidden")})),document.addEventListener("keydown",(t=>{"Escape"==t.key&&e.modal.classList.add("is-hidden")})))})()},f=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},k=localStorage.getItem("Watched films"),S=localStorage.getItem("Queued films"),M=JSON.parse(k),b=JSON.parse(S),q=(e,t)=>(t-=1,e.slice(0+21*t,20+21*t));L(q(M,s)),h(Math.ceil(M.length/20),s),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(M,s);f(),L(t),h(Math.ceil(M.length/20),s),n.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&n.addEventListener("click",(()=>{s-=1;const e=q(M,s);f(),L(e),h(Math.ceil(M.length/20),s),1===s&&(n.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(M,s);f(),L(e),h(Math.ceil(M.length/20),s),s===e.total_pages&&(a.style.display="none"),n.style.display="block"})),i.addEventListener("click",(e=>{e.preventDefault,s=1,L(q(M,s)),h(Math.ceil(M.length/20),s),i.classList.add("current-page"),o.classList.remove("current-page"),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(M,s);f(),L(t),h(Math.ceil(M.length/20),s),n.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&n.addEventListener("click",(()=>{s-=1;const e=q(M,s);f(),L(e),h(Math.ceil(M.length/20),s),1===s&&(n.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(M,s);f(),L(e),h(Math.ceil(M.length/20),s),s===e.total_pages&&(a.style.display="none"),n.style.display="block"}))})),o.addEventListener("click",(e=>{e.preventDefault,s=1,L(q(b,s)),h(Math.ceil(b.length/20),s),i.classList.remove("current-page"),o.classList.add("current-page"),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(b,s);f(),L(t),h(Math.ceil(b.length/20),s),n.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&n.addEventListener("click",(()=>{s-=1;const e=q(b,s);f(),L(e),h(Math.ceil(b.length/20),s),1===s&&(n.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(b,s);f(),L(e),h(Math.ceil(b.length/20),s),s===e.total_pages&&(a.style.display="none"),n.style.display="block"}))}));
//# sourceMappingURL=myLibrarySite.dd26b7e4.js.map
