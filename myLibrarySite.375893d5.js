const e=async e=>{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=18cc3ec683925dedb66d3e6092890eaa&language=pl-PL`);if(!t.ok)throw new Error;return await t.json()},t=document.querySelector(".pagination__list"),n=document.querySelector(".film-list"),l=document.querySelector(".prev"),a=document.querySelector(".next"),i=document.querySelector("#watchedButton"),o=document.querySelector("#queueButton");let s=1;const c=document.querySelector(".modal__img-picture"),r=document.querySelector(".modal__head"),d=document.querySelector(".modal__rating"),p=document.querySelector(".modal__votes-number"),u=document.querySelector(".modal__popularity-total"),y=document.querySelector(".modal__title-original"),m=document.querySelector(".modal__genre-description"),g=document.querySelector(".modal__text"),_=document.querySelector(".modal__button-watched"),v=document.querySelector(".modal__button-queue");function h(e,n){let l,a="",i=n-2,o=n+2;if(t.innerHTML="",e<7)for(let t=1;t<=e;t++)l=n===t?"btn__active":"",a+=`<li class="num ${l} pagination__item"><span>${t}</span></li>`;else{n>2&&(a+='<li class="num-first pagination__item"><span>1</span></li>',n>4&&(a+='<li class="dots"><span>...</span></li>')),e>6&&(n===e&&(i-=2),n===e-1&&(i-=1),n===e-2&&(i-=1,o-=1),1===n&&(o+=2,i+=1),2===n&&(o+=1),3===n&&(o+=1,i+=1));for(let t=i;t<=o;t++)t>e||(0===t&&t++,l=n===t?"btn__active":"",a+=`<li class="num ${l} pagination__item"><span>${t}</span></li>`);n<e-1&&(n<e-3&&(a+='<li class="dots"><span>...</span></li>'),a+=`<li class="num-last pagination__item"><span>${e}</span></li>`)}t.innerHTML=a}n.innerHTML="",t.innerHTML="",a.style.display="none",l.style.display="none";const L=t=>{const l=t.map((e=>`<div class="single-film" data-id="${e.id}" data-modal-open>\n            <img class="film-image" src="https://image.tmdb.org/t/p/w400/${e.poster_path}"\n                alt="${e.title}">\n            <div class="film-info">\n                <p class="film-title">${e.title}</p>\n                <div class="film-subinfo">\n                    <p class="film-genre">${e.genres.map((e=>e.name)).join(", ")}</p>\n                    <p>${e.release_date}</p>\n                </div>\n            </div>\n        </div>`)).join("");n.innerHTML=l;document.querySelectorAll(".single-film").forEach((t=>{t.addEventListener("click",(async t=>{t.preventDefault();const n=t.target.dataset.id;console.log(n);const l=await e(n);(async e=>{c.src=`https://image.tmdb.org/t/p/w400/${e.poster_path}`,r.innerHTML=`${e.title}`,d.innerHTML=`${e.vote_average.toFixed(1)}`,p.innerHTML=`${e.vote_count}`,u.innerHTML=`${e.popularity.toFixed(1)}`,y.innerHTML=`${e.original_title}`,m.innerHTML=`${e.genres.map((e=>e.name)).join(", ")}`,g.innerHTML=`${e.overview}`})(l),_.addEventListener("click",(()=>{watchedFilmsStorage.push({id:l.id,poster_path:l.poster_path,title:l.title,release_date:l.release_date,vote_average:l.vote_average,vote_count:l.vote_count,popularity:l.popularity,original_title:l.original_title,genres:l.genres,overview:l.overview});const e=[...new Map(watchedFilmsStorage.map((e=>[e.id,e]))).values()];localStorage.setItem("Watched films",JSON.stringify(e))})),v.addEventListener("click",(()=>{queuedFilmsStorage.push({id:l.id,poster_path:l.poster_path,title:l.title,release_date:l.release_date,vote_average:l.vote_average,vote_count:l.vote_count,popularity:l.popularity,original_title:l.original_title,genres:l.genres,overview:l.overview});const e=[...new Map(queuedFilmsStorage.map((e=>[e.id,e]))).values()];localStorage.setItem("Queued films",JSON.stringify(e))}))}))})),(()=>{const e={openModalBtn:document.querySelectorAll("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.forEach((e=>e.addEventListener("click",t))),e.modal.classList.contains("is-hidden")||(e.closeModalBtn.addEventListener("click",(()=>{e.modal.classList.add("is-hidden")})),document.addEventListener("keydown",(t=>{"Escape"==t.key&&e.modal.classList.add("is-hidden")})))})()},f=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},M=localStorage.getItem("Watched films"),k=localStorage.getItem("Queued films"),S=JSON.parse(M),b=JSON.parse(k),q=(e,t)=>(t-=1,e.slice(0+21*t,20+21*t));(()=>{if(null===S)return n.innerHTML="",t.innerHTML="",a.style.display="none",void(l.style.display="none");L(q(S,s)),h(Math.ceil(S.length/20),s),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(S,s);f(),L(t),h(Math.ceil(S.length/20),s),l.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&l.addEventListener("click",(()=>{s-=1;const e=q(S,s);f(),L(e),h(Math.ceil(S.length/20),s),1===s&&(l.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(S,s);f(),L(e),h(Math.ceil(S.length/20),s),s===e.total_pages&&(a.style.display="none"),l.style.display="block"}))})(),o.addEventListener("click",(e=>{if(e.preventDefault,s=1,null===b)return n.innerHTML="",t.innerHTML="",a.style.display="none",void(l.style.display="none");L(q(b,s)),h(Math.ceil(b.length/20),s),i.classList.remove("current-page"),o.classList.add("current-page"),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(b,s);f(),L(t),h(Math.ceil(b.length/20),s),l.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&l.addEventListener("click",(()=>{s-=1;const e=q(b,s);f(),L(e),h(Math.ceil(b.length/20),s),1===s&&(l.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(b,s);f(),L(e),h(Math.ceil(b.length/20),s),s===e.total_pages&&(a.style.display="none"),l.style.display="block"}))})),i.addEventListener("click",(e=>{if(e.preventDefault,s=1,null===S)return n.innerHTML="",t.innerHTML="",a.style.display="none",void(l.style.display="none");L(q(S,s)),h(Math.ceil(S.length/20),s),i.classList.add("current-page"),o.classList.remove("current-page"),t.addEventListener("click",(e=>{if(!isNaN(e.target.textContent)){s=Number(e.target.textContent);const t=q(S,s);f(),L(t),h(Math.ceil(S.length/20),s),l.style.display=1==s?"none":"block",s==t.total_pages?a.style.display="none":a.style.display="block"}})),s>1&&l.addEventListener("click",(()=>{s-=1;const e=q(S,s);f(),L(e),h(Math.ceil(S.length/20),s),1===s&&(l.style.display="none"),a.style.display="block"})),a.addEventListener("click",(()=>{s+=1;const e=q(S,s);f(),L(e),h(Math.ceil(S.length/20),s),s===e.total_pages&&(a.style.display="none"),l.style.display="block"}))}));
//# sourceMappingURL=myLibrarySite.375893d5.js.map
